/*
 * gitGraph.js
 *
 * Author: Sander Blue - http://www.sanderblue.com
 * Copyright (c) 2013, Sander Blue All rights reserved.
 *
 * Thanks to Morris.js and Moment.js
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the Software
 * is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */(function(e){e.gitGraph=function(t,n){function s(e){window[e]={html:n.html,user:n.user,repo:n.repo,gitData:i}}function u(){s("bar");var t=bar.user,n=bar.repo,r="https://api.github.com/repos/"+t+"/"+n+"/stats/commit_activity",i="";e.ajax({url:r,async:!1,dataType:"json",error:function(e,t,n){alert("Please make sure your username and repository information is correct. Status: "+t+"\n\nError: "+n)},success:function(t,n,r,s){var o=t[51].days,u=t[50].days,a=u.concat(o),f=(new Date).getDay(),l=new Array(7);l[0]=moment().utc().format("D");l[1]=moment().utc().add("days",6).format("D");l[2]=moment().utc().add("days",5).format("D");l[3]=moment().utc().add("days",4).format("D");l[4]=moment().utc().add("days",3).format("D");l[5]=moment().utc().add("days",2).format("D");l[6]=moment().utc().add("days",1).format("D");var c=new Array(7);c[0]=moment().utc().format("d");c[1]=moment().utc().add("days",1).format("d");c[2]=moment().utc().add("days",2).format("d");c[3]=moment().utc().add("days",3).format("d");c[4]=moment().utc().add("days",4).format("d");c[5]=moment().utc().add("days",5).format("d");c[6]=moment().utc().add("days",6).format("d");var h=new Array(7);h[0]=moment().utc().format("d");h[1]=moment().utc().add("days",1).format("d");h[2]=moment().utc().add("days",2).format("d");h[3]=moment().utc().add("days",3).format("d");h[4]=moment().utc().add("days",4).format("d");h[5]=moment().utc().add("days",5).format("d");h[6]=moment().utc().add("days",6).format("d");var p=h.concat(c),d=p.slice(f,f+7),v=a.slice(f+1,f+8),m=[],g={g:m};e.each(v,function(e,t){m.push(t)});var n=[{dayOfWeek:l[6],commits:g.g[0]},{dayOfWeek:l[5],commits:g.g[1]},{dayOfWeek:l[4],commits:g.g[2]},{dayOfWeek:l[3],commits:g.g[3]},{dayOfWeek:l[2],commits:g.g[4]},{dayOfWeek:l[1],commits:g.g[5]},{dayOfWeek:l[0],commits:g.g[6]}];i=n}});i={data:i,user:t,repo:n};return i}console.log(n);var r=new u,i=r.data;s("bar");var o={html:bar.html,user:bar.user,repo:bar.repo,git:i};s("data");var a=this;a.settings={};var f=e(t),t=t;a.init=function(){a.settings=e.extend({},o,n);console.log(n.html);console.log(o.html);return this,Morris.Line({element:o.html,data:data.gitData,xkey:"dayOfWeek",ykeys:["commits"],labels:["commits"],lineWidth:1.75,lineColors:["#479201"],pointSize:2.75,pointWidths:[1],pointStrokeColors:["#ffffff"],smooth:!0,continuousLine:!0,hideHover:!0,gridTextSize:10,parseTime:!1})};a.init()};e.fn.gitGraph=function(t){return this.each(function(){if(undefined==e(this).data("gitGraph")){var n=new e.gitGraph(this,t);e(this).data("gitGraph",n)}})}})(jQuery);